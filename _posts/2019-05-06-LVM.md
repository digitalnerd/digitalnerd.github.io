---
layout: post
title: LVM
---

LVM (Logical Volume Management - управление логическими томами) - это технология управления устройствами хранения, позволяющая объединять области различных физических устройств в один логический том. С помощью подсистемы device mapper текущая версия LVM2 может объединять физические устройства хранения в группы и по мере необходимости выделять логические единицы из полученного тома.

Основными преимуществами LVM являются повышенная абстракция, гибкость и высокий контроль. LVM также предлагает продвинутые функции: снепшоты, страйпинг и зеркалирование.

== Архитектура ==

pv -> gv -> lv -> fs

fs — file system

Физические тома (physical volumes, префикс pv) — устройства хранения.

Группа томов (volume groups, префикс vg) — пул хранения, состоящий из нескольких физических томов. Группы томов абстрагируют характеристики базовых устройств и функционируют как единое логическое устройство (при этом объемы компонентов пула объединяются).

Логический том (logical volumes, префикс lv или lvm) — это логический раздел, который выделяется из единого пространства группы томов. Логические тома эквивалентны разделам на физическом диске, но они гораздо более гибкие. Логические тома являются основным компонентом, с которым будут взаимодействовать пользователи и приложения.

Таким образом, LVM может объединять физические тома в группы томов и получить общий пул памяти, доступной в системе. В дальнейшем этот пул можно делить на произвольные логические тома, которые функционируют как гибкие разделы.

Создать LVM раздел для docker’a.
Добавить новый диск к серверу. Проверить корректность подключения командой:
```
$ sudo fdisk -l
...
```

Далее создаем первичный раздел sdb1:
```
$ sudo fdisk /dev/sdb
n
enter
enter
enter
...
p
t
L
8e
p
w
```

```
$ sudo pvcreate /dev/vdb1
```
```
$ sudo vgcreate vg01 /dev/vdb1
```
```
$ sudo lvcreate -l 100%FREE -n lvdocker vg01
```
```
$ sudo mkfs.ext4 /dev/mapper/vg01-lvdocker
```
```
$ sudo mount /dev/mapper/vg01-lvdocker /var/lib/docker
```
```
$ sudo vim /etc/fstab
/dev/vg01/lvdocker /var/lib/docker ext4 defaults 0 0
```

== Ссылки ==
ВВЕДЕНИЕ В LVM: ОСНОВНЫЕ ПОНЯТИЯ И ОПЕРАЦИИ -> https://www.8host.com/blog/vvedenie-v-lvm-osnovnye-ponyatiya-i-operacii/
